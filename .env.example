# ============================================
# KORA CONTACTS HUB - ENVIRONMENT VARIABLES
# ============================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control

# ============================================
# SERVER CONFIGURATION
# ============================================
NODE_ENV=development
PORT=8085

# ============================================
# MONGODB CONFIGURATION
# ============================================
# Staging/Development MongoDB URI
MONGODB_URI=mongodb+srv://contactsstaging:<db_password>@koracontactstaging.9jtkgbf.mongodb.net/koracontacthub_staging?retryWrites=true&w=majority&appName=Koracontactstaging

# Production MongoDB URI (for production deployment)
# MONGODB_URI_PROD=mongodb+srv://contactsprod:<db_password>@koracontactprod.xxxxx.mongodb.net/koracontacthub?retryWrites=true&w=majority

# ============================================
# JWT AUTHENTICATION
# ============================================
# Generate strong random strings for these (min 32 characters)
# Use: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your-jwt-secret-key-change-this-in-production
JWT_REFRESH_SECRET=your-jwt-refresh-secret-key-change-this-in-production
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=7d

# ============================================
# REDIS CONFIGURATION (for BullMQ & Caching)
# ============================================
# Local Redis
REDIS_URL=redis://localhost:6379

# Production Redis (Render/Cloud)
# REDIS_URL=redis://default:password@host:port

# ============================================
# EMAIL CONFIGURATION (Nodemailer)
# ============================================
# SMTP Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@kora.com
SMTP_PASS=your-email-password-or-app-password

# Alternative: SendGrid
# SENDGRID_API_KEY=your-sendgrid-api-key
# EMAIL_FROM=noreply@kora.com

# Alternative: Mailgun
# MAILGUN_API_KEY=your-mailgun-api-key
# MAILGUN_DOMAIN=your-mailgun-domain
# EMAIL_FROM=noreply@kora.com

# ============================================
# CARDDAV INTEGRATION (Optional)
# ============================================
# These will be stored encrypted in the database after initial setup
# CARDDAV_SERVER_URL=https://carddav.example.com
# CARDDAV_USERNAME=carddav-user
# CARDDAV_PASSWORD=carddav-password

# ============================================
# MOSYLE MDM INTEGRATION (Optional)
# ============================================
# These will be stored encrypted in the database after initial setup
# MOSYLE_API_URL=https://api.mosyle.com
# MOSYLE_API_KEY=your-mosyle-api-key
# MOSYLE_ORGANIZATION_ID=your-org-id

# ============================================
# SECURITY & RATE LIMITING
# ============================================
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_AUTH_MAX_REQUESTS=10

# CORS Configuration
CORS_ORIGIN=http://localhost:8085,http://localhost:5173

# ============================================
# FILE UPLOAD CONFIGURATION
# ============================================
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=csv

# ============================================
# LOGGING
# ============================================
LOG_LEVEL=info

# ============================================
# FRONTEND URL (for invitation links)
# ============================================
FRONTEND_URL=http://localhost:5173

# ============================================
# PRODUCTION CONFIGURATION (for Render)
# ============================================
# Uncomment and use these for production deployment
# MONGODB_URI=mongodb+srv://contactsprod:<db_password>@koracontactprod.xxxxx.mongodb.net/koracontacthub?retryWrites=true&w=majority&appName=Koracontactprod
# NODE_ENV=production
# PORT=10000
# JWT_SECRET=production-secret-different-from-staging
# JWT_REFRESH_SECRET=production-refresh-secret-different-from-staging

# ============================================
# PRODUCTION CONFIGURATION (for Render)
# ============================================
# Production MongoDB Connection String
# Format: mongodb+srv://Koracontacthubprod:YOUR_PASSWORD@koracontacthubprod.k4qngme.mongodb.net/koracontacthub?retryWrites=true&w=majority&appName=Koracontacthubprod
# MONGODB_URI=mongodb+srv://Koracontacthubprod:<db_password>@koracontacthubprod.k4qngme.mongodb.net/koracontacthub?retryWrites=true&w=majority&appName=Koracontacthubprod
